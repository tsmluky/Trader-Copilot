F401 [*] `datetime.datetime` imported but unused
 --> core\format_prompt_lite.py:2:22
  |
1 | from __future__ import annotations
2 | from datetime import datetime
  |                      ^^^^^^^^
  |
help: Remove unused import: `datetime.datetime`

F401 [*] `data.supported_tokens.VALID_TOKENS_FREE` imported but unused
 --> core\signal_evaluator.py:5:35
  |
3 | from sqlalchemy.orm import Session
4 | from typing import List, Dict
5 | from data.supported_tokens import VALID_TOKENS_FREE, VALID_TOKENS_FULL
  |                                   ^^^^^^^^^^^^^^^^^
6 | from sqlalchemy.pool import StaticPool
  |
help: Remove unused import

F401 [*] `data.supported_tokens.VALID_TOKENS_FULL` imported but unused
 --> core\signal_evaluator.py:5:54
  |
3 | from sqlalchemy.orm import Session
4 | from typing import List, Dict
5 | from data.supported_tokens import VALID_TOKENS_FREE, VALID_TOKENS_FULL
  |                                                      ^^^^^^^^^^^^^^^^^
6 | from sqlalchemy.pool import StaticPool
  |
help: Remove unused import

F401 [*] `sqlalchemy.pool.StaticPool` imported but unused
 --> core\signal_evaluator.py:6:29
  |
4 | from typing import List, Dict
5 | from data.supported_tokens import VALID_TOKENS_FREE, VALID_TOKENS_FULL
6 | from sqlalchemy.pool import StaticPool
  |                             ^^^^^^^^^^
7 |
8 | from models_db import Signal, SignalEvaluation, StrategyConfig
  |
help: Remove unused import: `sqlalchemy.pool.StaticPool`

E402 Module level import not at top of file
  --> main.py:41:1
   |
40 | # ==== 2. Imports locales (safe to import now) ====
41 | from pydantic import BaseModel
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
42 |
43 | from fastapi.responses import JSONResponse  # noqa: E402
   |

E741 Ambiguous variable name: `l`
  --> market_data\models.py:38:5
   |
36 |     o: float
37 |     h: float
38 |     l: float
   |     ^
39 |     c: float
40 |     v: float
   |

E741 Ambiguous variable name: `l`
  --> market_data\providers\ccxt_provider.py:74:22
   |
73 |     candles: List[Candle] = []
74 |     for ts_ms, o, h, l, c, v in raw:
   |                      ^
75 |         candles.append(
76 |             Candle(
   |

E402 Module level import not at top of file
  --> rag_context.py:86:1
   |
86 | from narrative_engine import generate_narrative
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |

F821 Undefined name `Any`
  --> rag_context.py:90:49
   |
89 | def build_token_context(
90 |     token: str, market_data: Optional[Dict[str, Any]] = None
   |                                                 ^^^
91 | ) -> Dict[str, str]:
92 |     """
   |

F821 Undefined name `router`
  --> routers\compat.py:55:2
   |
55 | @router.post("/analyze/lite")
   |  ^^^^^^
56 | async def analyze_lite(body: LiteIn):
57 |     payload = {
   |

F821 Undefined name `router`
  --> routers\compat.py:75:2
   |
75 | @router.post("/analyze/pro")
   |  ^^^^^^
76 | async def analyze_pro(body: ProIn):
77 |     payload = {
   |

F823 Local variable `json` referenced before assignment
   --> routers\strategies.py:103:22
    |
101 |         # Parse JSON lists safely
102 |         try:
103 |             tokens = json.loads(c.tokens)[0] if c.tokens else "Unknown"
    |                      ^^^^
104 |         except Exception:
105 |             tokens = c.tokens
    |

F841 Local variable `mid_col` is assigned to but never used
  --> strategies\HyperScalpStrategy.py:75:9
   |
73 |         lower_col = f"BBL_{self.bb_length}_{self.bb_std}"
74 |         upper_col = f"BBU_{self.bb_length}_{self.bb_std}"
75 |         mid_col = f"BBM_{self.bb_length}_{self.bb_std}"
   |         ^^^^^^^
76 |
77 |         # Cleanup
   |
help: Remove assignment to unused variable `mid_col`

F401 [*] `core.brand_guard.repair_response` imported but unused
  --> tests\test_copilot_core.py:16:50
   |
14 | from database import Base
15 | from models_db import User
16 | from core.brand_guard import check_brand_safety, repair_response
   |                                                  ^^^^^^^^^^^^^^^
17 |
18 | # Import dependency from the MODULE THAT USES IT to ensure key match
   |
help: Remove unused import: `core.brand_guard.repair_response`

F841 Local variable `bad_text` is assigned to but never used
  --> tests\test_copilot_core.py:76:5
   |
75 | def test_repair_response():
76 |     bad_text = "As an AI language model, I suggest buying BTC."
   |     ^^^^^^^^
77 |     # repaired = repair_response(bad_text, ["identity_leak"], "System Prompt")
78 |     # The repair is a simple string replacement in the mock/stub if no LLM,
   |
help: Remove assignment to unused variable `bad_text`

Found 15 errors.
[*] 5 fixable with the `--fix` option (2 hidden fixes can be enabled with the `--unsafe-fixes` option).
