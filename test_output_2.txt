============================= test session starts =============================
platform win32 -- Python 3.11.9, pytest-6.2.5, py-1.11.0, pluggy-1.6.0
rootdir: C:\Users\lukx\Desktop\TraderCopilot-freshsale
plugins: anyio-4.9.0
collected 1 item

backend\tests\test_copilot_core.py F                                     [100%]

================================== FAILURES ===================================
_____________________________ test_update_profile _____________________________

    def test_update_profile():
        # Update
        payload = {
            "trader_style": "SCALPER",
            "risk_tolerance": "DEGEN",
            "custom_instructions": "Only meme coins"
        }
        response = client.put("/advisor/profile", json=payload)
>       assert response.status_code == 200
E       assert 401 == 200
E        +  where 401 = <Response [401 Unauthorized]>.status_code

backend\tests\test_copilot_core.py:88: AssertionError
---------------------------- Captured stdout setup ----------------------------
[TEST DEBUG] Creating tables. Registered: dict_keys([])
============================== warnings summary ===============================
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\formparsers.py:12
  C:\Users\lukx\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\formparsers.py:12: PendingDeprecationWarning: Please use `import python_multipart` instead.
    import multipart

backend\core\schemas.py:17
  c:\Users\lukx\Desktop\TraderCopilot-freshsale\backend\core\schemas.py:17: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class Signal(BaseModel):

backend\core\schemas.py:184
  c:\Users\lukx\Desktop\TraderCopilot-freshsale\backend\core\schemas.py:184: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class UserResponse(BaseModel):

backend\main.py:66
  C:\Users\lukx\Desktop\TraderCopilot-freshsale\backend\main.py:66: DeprecationWarning: 
          on_event is deprecated, use lifespan event handlers instead.
  
          Read more about it in the
          [FastAPI docs for Lifespan Events](https://fastapi.tiangolo.com/advanced/events/).
          
    @app.on_event("startup")

..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\fastapi\applications.py:4495
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\fastapi\applications.py:4495
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\fastapi\applications.py:4495
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\fastapi\applications.py:4495
  C:\Users\lukx\AppData\Local\Programs\Python\Python311\Lib\site-packages\fastapi\applications.py:4495: DeprecationWarning: 
          on_event is deprecated, use lifespan event handlers instead.
  
          Read more about it in the
          [FastAPI docs for Lifespan Events](https://fastapi.tiangolo.com/advanced/events/).
          
    return self.router.on_event(event_type)

backend\main.py:71
  C:\Users\lukx\Desktop\TraderCopilot-freshsale\backend\main.py:71: DeprecationWarning: 
          on_event is deprecated, use lifespan event handlers instead.
  
          Read more about it in the
          [FastAPI docs for Lifespan Events](https://fastapi.tiangolo.com/advanced/events/).
          
    @app.on_event("shutdown")

backend\main.py:195
  C:\Users\lukx\Desktop\TraderCopilot-freshsale\backend\main.py:195: DeprecationWarning: 
          on_event is deprecated, use lifespan event handlers instead.
  
          Read more about it in the
          [FastAPI docs for Lifespan Events](https://fastapi.tiangolo.com/advanced/events/).
          
    @app.on_event("startup")

backend\main.py:725
  C:\Users\lukx\Desktop\TraderCopilot-freshsale\backend\main.py:725: DeprecationWarning: 
          on_event is deprecated, use lifespan event handlers instead.
  
          Read more about it in the
          [FastAPI docs for Lifespan Events](https://fastapi.tiangolo.com/advanced/events/).
          
    @app.on_event("startup")

backend\routers\logs.py:14
  c:\Users\lukx\Desktop\TraderCopilot-freshsale\backend\routers\logs.py:14: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class LogEntry(BaseModel):

backend\core\schemas.py:17
  C:\Users\lukx\Desktop\TraderCopilot-freshsale\backend\core\schemas.py:17: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class Signal(BaseModel):

backend\core\schemas.py:184
  C:\Users\lukx\Desktop\TraderCopilot-freshsale\backend\core\schemas.py:184: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class UserResponse(BaseModel):

-- Docs: https://docs.pytest.org/en/stable/warnings.html
=========================== short test summary info ===========================
FAILED backend/tests/test_copilot_core.py::test_update_profile - assert 401 =...
======================= 1 failed, 14 warnings in 4.85s ========================
